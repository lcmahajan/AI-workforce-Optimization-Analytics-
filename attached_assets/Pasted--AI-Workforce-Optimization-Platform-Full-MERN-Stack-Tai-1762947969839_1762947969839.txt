# ================================
# ðŸ§  AI Workforce Optimization Platform
# Full MERN Stack + Tailwind setup (visible structure)
# ================================

# Clean start
mkdir AI-Workforce-Optimization-Platform
cd AI-Workforce-Optimization-Platform

# 1ï¸âƒ£ BACKEND SETUP
mkdir -p backend/config backend/models backend/routes backend/controllers

# server.js
cat > backend/server.js << 'EOF'
import express from "express";
import mongoose from "mongoose";
import dotenv from "dotenv";
import cors from "cors";

dotenv.config();
const app = express();
app.use(cors());
app.use(express.json());

app.get("/", (req, res) => {
  res.send("âœ… AI Workforce Optimization Platform Backend Running!");
});

const PORT = process.env.PORT || 5000;
mongoose
  .connect(process.env.MONGO_URI)
  .then(() => app.listen(PORT, () => console.log(`ðŸš€ Server running on port ${PORT}`)))
  .catch((err) => console.error(err));
EOF

# sample route
cat > backend/routes/userRoutes.js << 'EOF'
import express from "express";
const router = express.Router();

router.get("/", (req, res) => {
  res.json([{ name: "John Doe", role: "Analyst" }, { name: "Jane Doe", role: "Manager" }]);
});

export default router;
EOF

# backend config
cat > backend/config/db.js << 'EOF'
import mongoose from "mongoose";
export const connectDB = async () => {
  try {
    const conn = await mongoose.connect(process.env.MONGO_URI);
    console.log(`âœ… MongoDB Connected: ${conn.connection.host}`);
  } catch (err) {
    console.error(`âŒ Error: ${err.message}`);
    process.exit(1);
  }
};
EOF

# 2ï¸âƒ£ FRONTEND SETUP
mkdir frontend
cd frontend
npm create vite@latest . -- --template react
npm install
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Tailwind config
cat > tailwind.config.js << 'EOF'
export default {
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  theme: { extend: {} },
  plugins: [],
};
EOF

# Add Tailwind imports
echo '@tailwind base; @tailwind components; @tailwind utilities;' > src/index.css

# sample Home page
cat > src/App.jsx << 'EOF'
import { useState } from "react";

function App() {
  const [search, setSearch] = useState("");

  return (
    <div className="min-h-screen bg-gray-100 text-gray-800 p-6">
      <h1 className="text-2xl font-bold mb-4">AI Workforce Optimization Platform</h1>
      <input
        type="text"
        placeholder="Search employees..."
        value={search}
        onChange={(e) => setSearch(e.target.value)}
        className="border p-2 rounded w-full mb-6"
      />
      <div className="bg-white p-4 rounded shadow">
        <h2 className="text-lg font-semibold">Employee Dashboard</h2>
        <p className="text-sm text-gray-600">Manage and analyze employee fitment and performance</p>
      </div>
    </div>
  );
}

export default App;
EOF

cd ..

# 3ï¸âƒ£ ROOT FILES
cat > .env.example << 'EOF'
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/workforce
PORT=5000
EOF

cat > package.json << 'EOF'
{
  "name": "ai-workforce-optimization-platform",
  "private": true,
  "scripts": {
    "start": "node backend/server.js",
    "backend": "nodemon backend/server.js",
    "frontend": "cd frontend && npm run dev"
  },
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "mongoose": "^8.0.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
EOF

echo "âœ… All files created successfully! Refresh Replit file tree to see frontend + backend folders clearly."
